<!doctype html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8">
    <title>Opção cleaner</title>
    <link rel="stylesheet" href="assets/base.css">
    <link rel="stylesheet" href="assets/layout.css">
    <link rel="stylesheet" href="assets/hljs-github.min.css">
    <link rel="stylesheet" href="https://unpkg.com/font-awesome@4.7.0/css/font-awesome.min.css">
  </head>
  <body>

    <header class="header">
      <div class="container flex">
        <h1 class="title flex-auto">
          <a href="/">Piii.js</a>
        </h1>
        <a class="item" href="https://github.com/piiijs/piii.js">
          <i class="fa fa-github"></i> GITHUB
        </a>
      </div>
    </header>

    <section class="section">
      <div class="container flex">
        <aside class="aside">
          <div>
            <ul>
              <li><a href="instalacao.html">Instalação</a></li>
              <li><a href="usando.html">Usando</a></li>
            </ul>
            <p>CONFIGURAÇÕES:</p>
            <ul>
              <li><a href="opcao_filters.html"><code>filters</code></a></li>
              <li><a href="opcao_aliases.html"><code>aliases</code></a></li>
              <li><a href="opcao_repeated.html"><code>repeated</code></a></li>
              <li><a href="opcao_censor.html"><code>censor</code></a></li>
              <li><a href="opcao_cleaner.html"><code>cleaner</code></a></li>
            </ul>
          </div>
        </aside>

        <article class="article flex-auto"><h1 id="opção-cleaner"><a class="header-link" href="#opção-cleaner"></a>Opção cleaner</h1>
<blockquote>
<p>Removedor de acentos.</p>
</blockquote>
<ul class="list">
<li>Tipo: <em>Function</em>.</li>
<li>Valor padrão: <a href="https://npm.im/diacritics"><code>diacritics</code></a>.</li>
</ul>
<p>Isso deve ser uma função que faz a remoção de acentos nos caracteres da <em>string</em> antes de filtrá-la, por padrão é usado o função do módulo <a href="https://npm.im/diacritics"><code>diacritics</code></a> que é uma das mais completas funções para normalização desses caracteres. É necessário fazer a remoção de acentos, para padronizar a criação de filtros, para impedir que um filtro seja burlado e principalmente para evitar que seja filtrado trechos indesejáveis dentro da <em>string</em>.</p>
<h2 id="exemplo"><a class="header-link" href="#exemplo"></a>Exemplo</h2>
<pre class="hljs"><code><span class="hljs-keyword">const</span> Piii = <span class="hljs-built_in">require</span>(<span class="hljs-string">"piii"</span>);
<span class="hljs-keyword">const</span> piiiFilters = <span class="hljs-built_in">require</span>(<span class="hljs-string">"piii-filters"</span>);

<span class="hljs-comment">/**
 * Desacentuador personalizado.
 */</span>
<span class="hljs-keyword">const</span> removeAccents = <span class="hljs-function"><span class="hljs-params">string</span> =&gt;</span> string
  .replace(<span class="hljs-regexp">/ô/g</span>, <span class="hljs-string">"o"</span>)
  .replace(<span class="hljs-regexp">/ê/g</span>, <span class="hljs-string">"e"</span>);

<span class="hljs-keyword">const</span> piii = <span class="hljs-keyword">new</span> Piii({
  <span class="hljs-attr">filters</span>: [
    piiiFilters.cu,
    piiiFilters.foder
   ],
  <span class="hljs-attr">cleaner</span>: removeAccents
});

piii.filter(<span class="hljs-string">"Vá se fôdêr!"</span>); <span class="hljs-comment">// "Vá se *!"</span>
piii.filter(<span class="hljs-string">"Vá tomar no cú!"</span>); <span class="hljs-comment">// "Vá tomar no cú!"</span></code></pre><p>Observe que no último exemplo (de <code>Vá tomar cú!</code>) o palavrão <em>cú</em> não foi filtrado, pois o desacentuador personalizado (definido em <code>removeAccents</code>) não fez a remoção do acento agudo na letra <em>U</em>.</p>
<h2 id="problemas-com-o-não-uso-de-um-desacentuador"><a class="header-link" href="#problemas-com-o-não-uso-de-um-desacentuador"></a>Problemas com o não-uso de um desacentuador</h2>
<p>O <em>Piii.js</em> para filtrar somente uma palavra usa o metacaractere <code>\b</code> (nas expressões regulares) evintando assim que seja filtrado partes de DENTRO de outras palavras, por exemplo, para que um filtro do palavrão <em>cu</em> não filtre <em>piraru<strong>cu</strong></em> ou <em><strong>cu</strong>rrí<strong>cu</strong>lo</em>. Se não for usado um desacentuador, um problema ocorrerá, porquê o metacactere <code>\b</code> não interpreta uma palavra quando ela termina ou começa com um caractere acentudado, por exemplo, a expressão regular <code>\bcú\b</code> (terminada com <em>ú</em>) não corresponde a nada na <em>string</em> <em>Vai tomar no cú!</em>. Por esses motivos é usado um removedor de acentos que irá remover todos os acentos da <em>string</em>, fazer a filtragem dos palavrões e posteriormente devolver todos os acentos da letras que não foram filtradas.</p>
        </article>
      </div>
    </section>

    <script>
      (function () {
        var pathname = window.location.pathname.substr(1);
        var activeLink = document.querySelector("[href='" + pathname + "']");

        if (activeLink) {
          activeLink.href = "javascript:void(0);";
          activeLink.classList.add("active");
        }
      })();
    </script>
  </body>
</html>
